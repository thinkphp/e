<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Euler's Number</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <style>
  body{font-family: arial,verdana,sans-serif;font-size: 31px}
  input{border:1px solid #ccc;font-size: 50px;text-align: center;padding: 3px;margin:3px;}
  input:focus{background: #B4FA79;text-align: center}  
  </style>
  <script type="text/javascript">

  DOMhelp = {

        addEvent: function(elem,evType,fn,useCapture) {

                if(elem.addEventListener) {

                       elem.addEventListener(evType,fn,useCapture);

                } else if(elem.attachEvent) {

                       var r = elem.attachEvent('on'+evType,fn);

                     return r;

                } else {

                      elem['on'+evType] = fn;
                }
        }
  };

  //e = 1 + 1/1! + 1/2! + 1/3! + 1/4!... -> |e(n+1)-e(n)| < epsilon e(n+1), e(n) doua aproximatii succesive ale lui e

  function fact(n) {
 
      if(n==0) return 1;

           else

               return n*fact(n-1);
  }

  function e(EPSILON) {

    var v1 = 2;

    var v2 = 2 + parseFloat(1.0/fact(2));

    var i = 3;

        while((v1>v2 ? v1-v2 : v2-v1) > EPSILON) {

          v1 = v2;

          v2+=parseFloat(1.0/fact(i));

          i+=1;  
        }

     return v2;
   }

  function solve() {

      var epsilon = parseFloat(document.getElementById('input').value);

          if(!epsilon || epsilon==0) {document.getElementById('solution').innerHTML = "Error!";return;} 

      var output = e(epsilon);

          document.getElementById('solution').innerHTML = "e = " + output;    
  }

  function init() {

          DOMhelp.addEvent(document.getElementById('solve'),'click',solve,false); 
  }

  DOMhelp.addEvent(window,'load',init,false);  

  </script>
</head>
<body>
<center>
<h1>Euler's Number<h1>
<label for="input">eps=</label><input type="input" id="input" name="solution" /><input type="button" id="solve" name="solve" value="e"/>
<p id="solution"></p>
</center>
</body>
</html>